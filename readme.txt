### Dockerfile:
    Запуск контейнера командами из консоли:
    docker image build --tag addressbook:1 .  # соберет образ приложения согласно командам из Dockerfile с названием addressbook:1 ("." в конце команды - путь к файлу Dockerfile (текущая директория))
    docker run --publish 8080:8080 addressbook:1  # запустит образ приложения addressbook:1 в докере с открытым наружу портом 8080 для обращений

    FROM - базовый образ linux, в котором будет работать приложение
    ENTRYPOINT - точка запуска (linux команда). Массив ["java", "-jar", "/app/app.jar"] преобразуется в команду -> java -jar /app/app.jar
    COPY - добавить файл из ПК в докер-образ
    RUN - выполнить linux команду
    ENV - задать переменную окружения
    EXPOSE - объявить порт (не пробрасывает порт, а указывает, что порт используется). Чтоб пробросить порт наружу, при запуске контейнера нужно указать --publish (docker run --publish 8080:8080 ...)
    USER - выполняет не от root (задает пользователя, под которым будут выполняться команды внутри образа)
    WORKDIR - где искать файл по умолчанию


### docker-run.sh
Скрипт с конфигурацией для запуска контейнера БД в докере
    --detach - чтоб докер контейнер работал в фоне и не закрывался при закрытии консоли
    --volume - копирует файл init-db.sql внутрь докер-контейнера для автоматического создания схемы БД при старте контейнера
    bitnami/postgresql:15 - неофициальный образ postgresql версии 15


### docker-compose.yaml
    файл может называться compose.yaml
    запуск командой "docker-compose up" в терминале из директории с yaml-файлом
    прописаны 2 контейнера (db и addressbook), которые после поднятия автоматические прилинкуются друг к другу
    остановка контейнеров сочетанием "ctrl+C", очистка контейнеров от предыдущего состояния (например удаление изменений в БД) командой "docker-compose down"
    если изменения в контейнере после команды "docker-compose down" все таки нужно сохранить, нужно добавить доп.раздел volumes и в нужном сервисе в разделе volumes указать нужный каталог(см.документацию к БД)
    чтоб докер контейнер работал в фоне и не закрывался при закрытии консоли добавляется парамер --detach (docker-compose up --detach). Остановка также "docker-compose down".

    docker-compose up - запустить (--detach чтоб докер контейнер работал в фоне и не закрывался при закрытии консоли)
                   down - остановить
                   ps - показать список контейнеров (посмотреть порты, иную инфу)
                   logs -логи

    version - версия докер-нотации
    services - запускаемые сервисы
        image -имя докер-образа
        ports - прослушиваемые порты
        environment - переменные окружения
        volumes - постоянное хранилище
        depends_on - указываются сервисы, от которых зависит текущий (например БД) и тогда текущий сервис стартует только после старта сервисов, от которых он зависит
        networks - сеть - указывается, чтоб контейнеры из одного docker-compose видели друг друга
        configs - конфигурация приложения внутри контейнера
        secrets - чувствительные конфигурации
        restart: always - контейнер будет запускаться автоматом при загрузке ОС
        deploy - доп конфиги (кол-во реплик, кол-во памяти)
    volumes - постоянное хранилище
    networks - сеть
    configs - конфигурация приложения внутри контейнера
    secrets - чувствительные конфигурации


### команды
docker image ls - просмотр всех докер образов в системе
             build - собрать образ приложения согласно командам из Dockerfile
             tag - псевдоним для образа
             rm - удалить образ
             prune - удалить образы, не привязанные к контейнерам
docker container ls --all - просмотр контейнеров в системе
docker container run <имя контейнера:tag> - запуск контейнера из образа
docker container stop <имя контейнера> - остановка контейнера

-p (--publish) - прослушивать порты
-v (--volume) - смонтировать хранилище файлов внутри контейнера
-e (--env) - добавить переменные окружения
-d (--detach) - выполнение в фоне
--name - явно задать имя контейнеру
--rm - удаление контейнера
